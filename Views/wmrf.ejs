<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Waste Material Report Form | Property Management System</title>
    <link rel="stylesheet" href="../css/wmrfstyle.css" />
    <link rel="stylesheet" href="../css/general.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>

  <body>
    <div class="container">
      <!-- Sidebar -->
      <%- include("./includes/sidebar") %>

      <!-- Main content -->
      <div class="main-content">
        <div class="fix">
          <h1>Waste Material Report Form</h1>
          <h2>Item Details</h2>
        </div>

        <div class="form-container">
          <form method="POST" action="/wmrf/save" enctype="multipart/form-data">
            <!-- Item Details -->
            <div class="form-group0">
              <div class="third-width">
                <label>Document Type*</label>
                <select name="documentType" id="documentType">
                  <option value="par">PAR</option>
                  <option value="ics">ICS</option>
                </select>
              </div>
              <div class="half-width">
                <label for="entityName">Entity Name *</label>
                <input
                  type="text"
                  name="entity_name"
                  id="entity_name"
                  placeholder="Ex. Eastern Samar State University"
                  required
                />
              </div>
              <div class="half-width">
                <label for="fundCluster">Fund Cluster *</label>
                <input
                  type="text"
                  id="fund_cluster"
                  name="fund_cluster"
                  required
                />
              </div>
              <div class="half-width">
                <label for="wmrNo">WMR No. *</label>
                <input
                  type="number"
                  id="wmr_no"
                  name="wmr_no"
                  placeholder="Ex. 123213"
                  required
                />
              </div>
              <div class="half-width">
                <label for="storage">Place of Storage *</label>
                <input
                  type="text"
                  id="storage"
                  name="storage"
                  placeholder="Ex. Supply Office"
                  required
                />
              </div>
            </div>

            <!-- Additional Details -->
            <div class="form-group1">
              <div class="half-width">
                <label for="office">Name of Office *</label>
                <input
                  type="text"
                  id="office"
                  name="office"
                  placeholder="Ex. Smart Center"
                  required
                />
              </div>
              <div class="half-width">
                <label for="quantity">Quantity *</label>
                <input
                  type="number"
                  id="quantity"
                  name="quantity"
                  placeholder="Ex. 100"
                  required
                />
              </div>
              <div class="half-width">
                <label for="unit">Unit *</label>
                <input
                  type="text"
                  id="unit"
                  name="unit"
                  placeholder="Ex. Unit"
                  required
                />
              </div>
              <div class="half-width">
                <label for="purpose">Purpose *</label>
                <select id="purpose" name="purpose" required>
                  <option value="" disabled selected>Select Purpose</option>
                  <option value="donation">Donation</option>
                  <option value="repair">Repair</option>
                  <option value="recycling">Recycling</option>
                </select>
              </div>
            </div>

            <!-- Disposal Details -->
            <div class="form-group2">
              <div class="half-width">
                <label for="propertyNo">Property Number *</label>
                <input
                  type="text"
                  id="property_no"
                  name="property_no"
                  placeholder="Ex. 15-04-011"
                  required
                />
                <div
                            style="display: flex; flex-direction: column"
                            id="results"
                          ></div>
                        </div>  
              </div>
              
              <div class="half-width">
                <label for="date">Date *</label>
                <input
                  type="date"
                  id="disposal_date"
                  name="disposal_date"
                  required
                />
              </div>
              <div class="half-width">
                <label for="endUser">Name of End User *</label>
                <input
                  type="text"
                  id="endUser"
                  name="endUser"
                  placeholder="Ex. John Lloyd Tabuac"
                  required
                />
              </div>
              <div class="half-width">
                <label for="unitValue">Unit Value *</label>
                <input
                  type="number"
                  id="unitValue"
                  name="unitValue"
                  placeholder="Ex. 1000"
                  required
                />
              </div>
              <div class="half-width">
                <label for="totalValue">Total Value *</label>
                <input
                  type="number"
                  id="total_value"
                  name="total_value"
                  placeholder="Ex. 100,000"
                  required
                />
              </div>
            </div>

            <!-- Disposal Methods -->
            <div class="form-box">
              <div class="form-box description-section">
                <div class="form-group3">
                  <label
                    >I hereby certify that the property enumerated above was
                    disposed of as follows:</label
                  >
                  <div class="checkbox-group">
                    <label
                      ><input type="checkbox" id="destroyed" name="destroyed" />
                      Destroyed</label
                    >
                    <label
                      ><input
                        type="checkbox"
                        id="private_sale"
                        name="private_sale"
                      />
                      Sold at private sale</label
                    >
                    <label
                      ><input
                        type="checkbox"
                        id="public_auction"
                        name="public_auction"
                      />
                      Sold at public auction</label
                    >
                    <label>
                      <input type="checkbox" id="transfer" name="transfer" />
                      Transferred without cost to
                      <input
                        type="text"
                        id="agency_name"
                        name="agency_name"
                        placeholder="Name of the agency"
                      />
                    </label>
                  </div>
                </div>
              </div>

              <!-- Description Section -->
              <div class="form-box description-section">
                <div class="form-group4">
                  <label for="description">Description:</label>
                  <select id="description" name="description">
                    <option value="" disabled selected>
                      Search Serial ID...
                    </option>
                    <option value="serial1">Serial ID 001</option>
                    <option value="serial2">Serial ID 002</option>
                    <option value="serial3">Serial ID 003</option>
                    <option value="serial4">Serial ID 004</option>
                    <option value="serial5">Serial ID 005</option>
                    <option value="serial6">Serial ID 006</option>
                    <option value="serial7">Serial ID 007</option>
                    <option value="serial8">Serial ID 008</option>
                    <option value="serial9">Serial ID 009</option>
                    <option value="serial10">Serial ID 010</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Parent container to center both boxes horizontally -->
            <div
              style="
                display: flex;
                justify-content: space-around;
                align-items: flex-start;
                gap: 40px; /* space between the two boxes */
                margin-top: 50px;
              "
            >
              <!-- Box #1 -->
              <div class="photo-upload-container" style="width: 200px">
                <!-- Hidden input for Photo #1 -->
                <input
                  type="file"
                  id="photo1"
                  name="photo1"
                  accept="image/*"
                  style="display: none"
                />

                <!-- Dashed box -->
                <div
                  class="upload-box"
                  id="uploadBox1"
                  style="
                    width: 500px;
                    height: 500px;
                    border: 2px dashed #ccc;
                    border-radius: 8px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    position: relative;
                    overflow: hidden; /* so the image stays within the box */
                  "
                  onclick="document.getElementById('photo1').click()"
                >
                  <!-- Initially visible icon/text -->
                  <div class="upload-icon" style="font-size: 2em">+</div>
                  <div class="upload-text">Attach Photo #1</div>

                  <!-- The image preview (initially hidden) -->
                  <img
                    id="photoPreview1"
                    alt="Preview 1"
                    style="
                      position: absolute;
                      top: 0;
                      left: 0;
                      width: 100%;
                      height: 100%;
                      object-fit: cover; /* fill the box entirely */
                      object-position: center; /* center the subject of the image */
                      border-radius: 8px;
                      display: none;
                    "
                  />
                </div>
              </div>

              <!-- Box #2 -->
              <div class="photo-upload-container" style="width: 200px">
                <!-- Hidden input for Photo #2 -->
                <input
                  type="file"
                  id="photo2"
                  name="photo2"
                  accept="image/*"
                  style="display: none"
                />

                <!-- Dashed box -->
                <div
                  class="upload-box"
                  id="uploadBox2"
                  style="
                    width: 500px;
                    height: 500px;
                    border: 2px dashed #ccc;
                    border-radius: 8px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    position: relative;
                    overflow: hidden;
                  "
                  onclick="document.getElementById('photo2').click()"
                >
                  <!-- Initially visible icon/text -->
                  <div class="upload-icon" style="font-size: 2em">+</div>
                  <div class="upload-text">Attach Photo #2</div>

                  <!-- The image preview (initially hidden) -->
                  <img
                    id="photoPreview2"
                    alt="Preview 2"
                    style="
                      position: absolute;
                      top: 0;
                      left: 0;
                      width: 100%;
                      height: 100%;
                      object-fit: cover;
                      object-position: center;
                      border-radius: 8px;
                      display: none;
                    "
                  />
                </div>
              </div>
            </div>

            <script>
              // ----- Box #1 -----
              const attachPhoto1 = document.getElementById("photo1");
              const photoPreview1 = document.getElementById("photoPreview1");
              const uploadBox1 = document.getElementById("uploadBox1");
              const uploadIcon1 = uploadBox1.querySelector(".upload-icon");
              const uploadText1 = uploadBox1.querySelector(".upload-text");

              attachPhoto1.addEventListener("change", () => {
                if (attachPhoto1.files && attachPhoto1.files[0]) {
                  const file = attachPhoto1.files[0];
                  const reader = new FileReader();

                  reader.onload = (e) => {
                    photoPreview1.src = e.target.result;
                    photoPreview1.style.display = "block";
                    // Hide the plus icon and text
                    uploadIcon1.style.display = "none";
                    uploadText1.style.display = "none";
                  };
                  reader.readAsDataURL(file);
                }
              });

              // ----- Box #2 -----
              const attachPhoto2 = document.getElementById("photo2");
              const photoPreview2 = document.getElementById("photoPreview2");
              const uploadBox2 = document.getElementById("uploadBox2");
              const uploadIcon2 = uploadBox2.querySelector(".upload-icon");
              const uploadText2 = uploadBox2.querySelector(".upload-text");

              attachPhoto2.addEventListener("change", () => {
                if (attachPhoto2.files && attachPhoto2.files[0]) {
                  const file = attachPhoto2.files[0];
                  const reader = new FileReader();

                  reader.onload = (e) => {
                    photoPreview2.src = e.target.result;
                    photoPreview2.style.display = "block";
                    // Hide the plus icon and text
                    uploadIcon2.style.display = "none";
                    uploadText2.style.display = "none";
                  };
                  reader.readAsDataURL(file);
                }
              });
            </script>

            <!-- Form Buttons -->
            <div class="button-container">
              <button type="button" class="btn-primary">Print</button>
              <button type="submit" class="btn-secondary">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
  <script src="../js/wmrf-api.js"></script>
</html>
