<div class="sidebar">
    <div class="logo-section">
        <div class="imageSection">
            <div>
                <img src="../images/ESSU_Logo_New.png" alt="University Logo">
            </div>
            <div class="pms">
                <img src="../images/pims.png" alt="PMS Logo" class="pms" style="width: 85%; height: 85%;">
            </div>
        </div>
        <div class="line">
            <div class="dot"></div>
            <div class="line1"></div>
            <div class="dot"></div>
        </div>
        <h5 class="title">EASTERN SAMAR STATE UNIVERSITY</h5>
        <div class="basta">
            <p>EXCELLENCE</p>
            <div class="dot"></div>
            <p>ACCOUNTABILITY</p>
            <div class="dot"></div>
            <p>SERVICE</p>
        </div>
    </div>

    <nav class="nav-menu">
        <ul>
            <li><a href="/dashboard"><img src="/Public/images/cuida--dashboard-outline.svg" alt=""
                        class="dash">Dashboard</a></li>
            <li>
                <a href="#addItemLink" id="addItemLink"><img src="/Public/images/material-symbols--add-ad.svg" alt=""
                        class="add">Add Item <img src="/Public/images/fe--arrow-down.svg" alt="" class="arrow_down"></a>
                <ul id="dropdown" style="display: none;" class="dropdown-men">
                    <li><a href="/par">Property Acknowledgement Receipt</a></li>
                    <li><a href="/ics">Inventory Custodian Slip</a></li>
                </ul>
            </li>
            <li><a href="/Inventory"><img src="/Public/images/material-symbols--inventory.svg" alt=""
                        class="inve">Inventory</a></li>

            <li>
                <a href="#" id="prslink">
                    <img src="/Public/images/hugeicons--delivery-return-02.svg" alt="" class="return"> Return Item
                    <img src="/Public/images/fe--arrow-down.svg" alt="" class="arrow_down_return">
                </a>
                <ul id="dropdowns" style="display: none;">
                    <li><a href="/prs">Property Return Slip</a></li>

                    <li><a href="/mrer">Maintenance Recommendation Evaluation Report Form</a></li>

                    <li><a href="/wmrf">Waste Material Report Form</a></li>

                </ul>
            </li>
            
            <li><a href="/ptr"><img src="/Public/images/bxs--user-account.svg" alt="" class="ptr">Property Transfer Receipt</a></li>
            
            <% if (role == "Admin"){ %>

                <li>
                    <a href="#rfidlink" id="rfidlink">
                        <img src="" alt="" class="rfid">RFID<img src="/Public/images/fe--arrow-down.svg" alt="" class="arrow_downss">
                    </a>
                    <ul id="dropdownsss" style="display: none;">
                        <li><a href="/rfid">Registration</a></li>
        
                        <li><a href="/notif">Logs</a></li>
                    
                       
                    </ul></li>
                
                    <li>
                     <a href="#userlink" id="userlink">
                         <img src="/Public/images/mdi--user-outline.svg" alt="" class="use">User        <img src="/Public/images/fe--arrow-down.svg" alt="" class="arrow_downs">
                     </a>
                     <ul id="dropdownss" style="display: none;">
                         
         
                         <li><a href="/user">User Acount</a></li>
                         
                        </ul></li>
                        <% } %>
                        <% if (role == "Employee"){ %>
                            <li>
                            <a href="/user" class="use" >User Acount</a>
                        </li>
                        <% } %>

                    
            
            <li>
                <button class="logout-btn" onclick="confirmLogout()">
                    <div class="logout">
                    Log Out
                </div>
                </button>
            </li>
         
        </ul>
    </nav>
</div>
</div>

<script>
    function confirmLogout() {
        const userConfirmed = confirm("Are you sure you want to log out?");
        if (userConfirmed) {
            // Redirect to the backend logout route to clear the session
            window.location.href = "/logout";  // This will trigger the logout route on the backend
        }
    }


</script>

<script>
    // Add Item link functionality
    document.addEventListener("DOMContentLoaded", function () {
    function toggleDropdown(linkId, dropdownId, arrowClass) {
        const link = document.getElementById(linkId);
        const dropdown = document.getElementById(dropdownId);
        const arrow = document.querySelector(arrowClass);

        // Check localStorage for the dropdown state
        const isOpen = localStorage.getItem(dropdownId) === "open";

        if (isOpen) {
            dropdown.style.display = "block";
            arrow.classList.add("rotate");
        }

        link.addEventListener("click", function (event) {
            event.preventDefault(); // Prevent default link behavior

            if (dropdown.style.display === "none" || dropdown.style.display === "") {
                dropdown.style.display = "block"; // Show dropdown
                localStorage.setItem(dropdownId, "open"); // Save state
            } else {
                dropdown.style.display = "none"; // Hide dropdown
                localStorage.removeItem(dropdownId); // Remove state
            }

            arrow.classList.toggle("rotate");
        });
    }

    // Apply the function to each dropdown
    toggleDropdown("addItemLink", "dropdown", ".arrow_down");
    toggleDropdown("prslink", "dropdowns", ".arrow_down_return");
    toggleDropdown("userlink", "dropdownss", ".arrow_downs");
    toggleDropdown("rfidlink", "dropdownsss", ".arrow_downss");
});

</script>


    <script>
    document.addEventListener("DOMContentLoaded", function () {
        const currentLocation = window.location.pathname; // Get current page URL
        const navLinks = document.querySelectorAll(".nav-menu ul li a");

        navLinks.forEach(link => {
            if (link.getAttribute("href") === currentLocation) {
                link.classList.add("active"); // Apply the highlight class
            }
        });
    });
</script>

