<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICS Form | Property Management System</title>
    <link rel="stylesheet" href="../css/general.css">
    <link rel="stylesheet" href="../css/icsstyle.css">
</head>

<body>

    <%- include("./includes/sidebar.ejs") %>

        <% if (messages.success) { %>
            <script>
                alert("<%= messages.success %>");
            </script>
            <% } %>
                <% if (messages.error) { %>
                    <script>
                        alert("<%= messages.error %>");
                    </script>
                    <% } %>
                        <div class="main-content">
                            <div class="form-containers">
                                <h1>Inventory Custodian Slip</h1>
                                <form method="POST" action="/par/save">
                                    <h2>Item Details</h2>
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label for="itemName">Name of Item *</label>
                                            <input type="text" id="itemName" name="itemName"
                                                placeholder="Ex. Portable Controlled Learning System" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="accountable">Accountable *</label>
                                            <input type="text" id="accountable" name="accountable"
                                                placeholder="Ex. Carlos A. Santos" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="cost">Unit Cost/Value *</label>
                                            <input type="number" id="cost" name="cost" placeholder="Ex. 30,000.00"
                                                required>
                                        </div>
                                        <div class="form-group">
                                            <label for="dateAcquired">Date Acquired *</label>
                                            <input type="date" id="dateAcquired" name="dateAcquired"
                                                placeholder="Ex. 3/18/2019" required>
                                        </div>

                                        <div class="form-group">
                                            <label for="location">Location *</label>
                                            <div class="custom-dropdown">
                                                <div class="custom-dropdown-trigger" id="location-dropdown-trigger">
                                                    Select Location
                                                </div>
                                                <div class="custom-dropdown-options" id="location-dropdown-options">
                                                    <div class="custom-dropdown-option">College of Engineering</div>
                                                    <div class="custom-dropdown-option">Smart Center</div>
                                                    <div class="custom-dropdown-option">Library</div>
                                                    <div class="custom-dropdown-option" data-cancel="true">Cancel Selection</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="category">Category *</label>
                                            <div class="custom-dropdown">
                                                <div class="custom-dropdown-trigger" id="category-dropdown-trigger">
                                                    Select Category
                                                </div>
                                                <div class="custom-dropdown-options" id="category-dropdown-options">
                                                    <div class="custom-dropdown-option">Furnitures</div>
                                                    <div class="custom-dropdown-option">Appliances</div>
                                                    <div class="custom-dropdown-option">Electronics</div>
                                                    <div class="custom-dropdown-option" data-cancel="true">Cancel Selection</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="uacs">UACS Code *</label>
                                            <div class="custom-dropdown">
                                                <div class="custom-dropdown-trigger" id="uacs-dropdown-trigger">
                                                    Select UACS
                                                </div>
                                                <div class="custom-dropdown-options" id="uacs-dropdown-options">
                                                    <div class="custom-dropdown-option">Machinery #1060501000</div>
                                                    <div class="custom-dropdown-option">Office Equipment #1060502000</div>
                                                    <div class="custom-dropdown-option">Agricultural Equipment #1060503000</div>
                                                    <div class="custom-dropdown-option">Medical Equipment   #1060511000</div>
                                                    <div class="custom-dropdown-option">Printing Equipment   #1060512000</div>
                                                    <div class="custom-dropdown-option">Technical and Scientific Equipment   #1060514000</div>
                                                    <div class="custom-dropdown-option">Other Machinery and Equipment  #10605990000</div>
                                                    <div class="custom-dropdown-option">Motor Vehicles   #1060601000</div>
                                                    <div class="custom-dropdown-option">Furniture and Fixtures    #1060701000</div>
                                                    <div class="custom-dropdown-option">Books   #1060702000</div>
                                                    <div class="custom-dropdown-option">Software   #1080102000</div>
                                                    <div class="custom-dropdown-option">Information and Communication Technology Equipment   #1060501000</div>
                                                    <div class="custom-dropdown-option" data-cancel="true" id="cancel">Cancel Selection</div>
                                                </div>
                                            </div>
                                        </div>
                                        <script>
                                        document.addEventListener("DOMContentLoaded", function () {
                                            // Handle dropdown functionality for Location
                                            const locationTrigger = document.getElementById("location-dropdown-trigger");
                                            const locationOptions = document.getElementById("location-dropdown-options");
                                        
                                            locationTrigger.addEventListener("click", function () {
                                                locationOptions.style.display = locationOptions.style.display === "block" ? "none" : "block";
                                            });
                                        
                                            locationOptions.addEventListener("click", function (event) {
                                                const clickedOption = event.target;
                                                if (clickedOption.classList.contains("custom-dropdown-option")) {
                                                    const isCancel = clickedOption.getAttribute("data-cancel") === "true";
                                                    locationTrigger.textContent = isCancel ? "Select Location" : clickedOption.textContent;
                                                    locationOptions.style.display = "none";
                                                }
                                            });
                                        
                                            // Handle dropdown functionality for Category
                                            const categoryTrigger = document.getElementById("category-dropdown-trigger");
                                            const categoryOptions = document.getElementById("category-dropdown-options");
                                        
                                            categoryTrigger.addEventListener("click", function () {
                                                categoryOptions.style.display = categoryOptions.style.display === "block" ? "none" : "block";
                                            });
                                        
                                            categoryOptions.addEventListener("click", function (event) {
                                                const clickedOption = event.target;
                                                if (clickedOption.classList.contains("custom-dropdown-option")) {
                                                    const isCancel = clickedOption.getAttribute("data-cancel") === "true";
                                                    categoryTrigger.textContent = isCancel ? "Select Category" : clickedOption.textContent;
                                                    categoryOptions.style.display = "none";
                                                }
                                            });
                                        
                                            // Handle dropdown functionality for UACS
                                            const uacsTrigger = document.getElementById("uacs-dropdown-trigger");
                                            const uacsOptions = document.getElementById("uacs-dropdown-options");
                                        
                                            uacsTrigger.addEventListener("click", function () {
                                                uacsOptions.style.display = uacsOptions.style.display === "block" ? "none" : "block";
                                            });
                                        
                                            uacsOptions.addEventListener("click", function (event) {
                                                const clickedOption = event.target;
                                                if (clickedOption.classList.contains("custom-dropdown-option")) {
                                                    const isCancel = clickedOption.getAttribute("data-cancel") === "true";
                                                    uacsTrigger.textContent = isCancel ? "Select UACS" : clickedOption.textContent;
                                                    uacsOptions.style.display = "none";
                                                }
                                            });
                                        
                                            // Close dropdown if clicked outside
                                            window.addEventListener("click", function (event) {
                                                if (!event.target.closest('.custom-dropdown')) {
                                                    locationOptions.style.display = "none";
                                                    categoryOptions.style.display = "none";
                                                    uacsOptions.style.display = "none";
                                                }
                                            });
                                        });
                                    </script>

                                        <div class="form-group">
                                            <label for="inventoryNo">Inventory Item No.</label>
                                            <input type="number" name="inventoryNo" id="inventoryNo" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="burs">BURS #</label>
                                            <input type="number" id="burs" name="burs"
                                                placeholder="Ex. 210101-2018-11-1156 11/6/2018" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="life">Estimated Useful Life *</label>
                                            <input type="text or number" id="life" name="estimatedLife" placeholder="N/A"
                                                required>
                                        </div>
                                        <div class="form-group">
                                            <label for="po">PO # *</label>
                                            <input type="text or number" id="po" name="POnumber"
                                                placeholder="Ex. GOODYS-2018-05-A 11/05/18" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="code">Code *</label>
                                            <input type="number" id="code" name="code" placeholder="Ex. 1060054000"
                                                required>
                                        </div>
                                        <div class="form-group">
                                            <label for="iar">IAR *</label>
                                            <input type="number" id="iar" name="IAR"
                                                placeholder="Ex. 2019-ICO-093 3/15/2019" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="supplier">Supplier *</label>
                                            <input type="text" id="supplier" name="supplier"
                                                placeholder="Ex. HYTEC POWER INC." required>
                                        </div>
                                        <div class="form-group">
                                            <label for="serial">Serial No.</label>
                                            <input type="number" id="serial" name="serialNumber" placeholder="Ex. 488320"
                                                required>
                                        </div>
                                        <div class="form-group">
                                            <label for="propertyNo">Property No.</label>
                                            <input type="number" id="propertyNo" name="propertyNumber"
                                                placeholder="Ex. 1023498887848971H" required>
                                        </div>
                                        </div>
                                        <div class="form-group description">
                                            <label for="description">Description</label>
                                            <textarea id="description" name="description"
                                                placeholder="Ex. Portable PLC Controlled Learning System&#10;Brand: Amatrol&#10;Model: 890-757-73-DCU XXXXXXXXX"></textarea required>
                                        </div>
                                    </div>
                                    <div class="button-container">
                                        <button type="submit" class="save-button">Save</button>
                                        <button type="button" class="cancel-button">Cancel</button>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- PAR Preview -->
                        <div id="par-preview" style="display:none;">
                            <h2>Property Acknowledgement Receipt (PAR)</h2>
                            <table>
                                <tr>
                                    <td colspan="2">Entity Name: EASTERN SAMAR STATE UNIVERSITY</td>
                                    <td>Fund Cluster: <span id="previewFundCluster"></span></td>
                                    <td>PAR No.: <span id="previewParNo"></span></td>
                                </tr>
                                <!-- Additional rows follow -->
                            </table>
                            <button onclick="window.print()">Print</button>
                        </div>
                        </div>

                        <script>
                            function fillPreview() {
                                // Transfer form data to preview
                                document.getElementById('previewFundCluster').textContent = document.getElementById('fundCluster').value;
                                document.getElementById('previewParNo').textContent = document.getElementById('parNo').value;
                                document.getElementById('previewQuantity').textContent = document.getElementById('quantity').value;
                                document.getElementById('previewDescription').textContent = document.getElementById('description').value;
                                document.getElementById('previewPropertyNo').textContent = document.getElementById('propertyNo').value;
                                document.getElementById('previewDateAcquired').textContent = document.getElementById('dateAcquired').value;
                                document.getElementById('previewUnitValue').textContent = document.getElementById('unitValue').value;
                                document.getElementById('previewTotalAmount').textContent = document.getElementById('totalAmount').value;
                                document.getElementById('previewRemarks').textContent = document.getElementById('remarks').value;
                                document.getElementById('previewStatus').textContent = document.getElementById('status').value;
                                document.getElementById('previewStatusDate').textContent = document.getElementById('statusDate').value;
                                document.getElementById('previewInstructorOffice').textContent = document.getElementById('instructorOffice').value;
                                document.getElementById('previewAdminOfficerOffice').textContent = document.getElementById('adminOfficerOffice').value;

                                // Show the preview
                                document.getElementById('par-preview').style.display = 'block';
                            }

                            function saveForm() {
                                alert("Save functionality is not yet implemented.");
                                // Implement save logic here (e.g., send data to server)
                            }

                            function cancelForm() {
                                if (confirm("Are you sure you want to cancel? All data will be cleared.")) {
                                    document.getElementById('parForm').reset();
                                    document.getElementById('par-preview').style.display = 'none';
                                }
                            }
                        </script>


                        <script>
                            function handleSelection(selectElement) {
                                if (selectElement.value === "none") {
                                    selectElement.value = ""; // Reset the selection
                                }
                            }
                        </script>

</body>

</html>