<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard | Property Management System</title>
    <link rel="stylesheet" href="../css/dashboardstyle.css" />
    <link rel="stylesheet" href="../css/general.css" />
    <link rel="stylesheet" href="../css/dashboard.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>

  <body>
    <%- include("./includes/sidebar") %>
    <div class="container">
      <!-- Main content -->
      <div class="main-content">
        <div class="fix">
          <h1>Dashboard</h1>
          <hr />
        </div>
        <div class="right-allign">
          <p>
            <span id="current-time"
              ><%= currentDateTime.toLocaleString() %></span
            >
          </p>
        </div>

        <!-- Cards -->
        <div class="cards-container">
          <div class="card purple">
            ICT Equipment<br /><span id="ICTEquipment"></span>
          </div>
          <div class="card red">
            Office Equipment<br /><span id="officeEquipment"></span>
          </div>
          <div class="card green">
            Agricultural and Forestry Equipment<br /><span
              id="AgriEquipment"
            ></span>
          </div>
          <div class="card purple">
            Medical Equipment<br /><span id="MedEquipment"></span>
          </div>
          <div class="card red">
            Printing Equipment<br /><span id="PrintEquipment"></span>
          </div>
          <div class="card green">
            Technical and Scientific Equipment<br /><span
              id="TSEquipment"
            ></span>
          </div>
          <div class="card purple">
            Other Machinery and Equipment<br /><span id="OMEquipment"></span>
          </div>
          <div class="card red">
            Motor Vehicles<br /><span id="MotorVehicles"></span>
          </div>
          <div class="card green">
            Furniture and Fixtures<br /><span id="FurnitureEquipment"></span>
          </div>
          <div class="card purple">Books<br /><span id="Books"></span></div>
          <div class="card red">Software<br /><span id="Software"></span></div>
          <div class="card green">
            Machinery<br /><span id="MachineryEquipment"></span>
          </div>
        </div>

        <!-- Table -->
        <div class="table-container">
          <i class="fa-solid fa-maximize" id="maximize-icon"></i>
          <h2>REPORT ON THE PHYSICAL COUNT OF PROPERTY, PLANT AND EQUIPMENT</h2>
          <h3>Tech. & Scientific Equipment (1 06 05 140 00)</h3>
          <table id="data-table">
            <thead>
              <tr>
                <th>Article</th>
                <th>Description</th>
                <th>Property Number</th>
                <th>Unit</th>
                <th>Value Unit</th>
                <th>Qty per PE Card</th>
                <th>Qty per Count</th>
                <th>Shortage/Overage Qty</th>
                <th>Remarks</th>
                <th>Received By</th>
                <th>Location</th>
                <th>Date Acquired</th>
              </tr>
            </thead>
            <tbody id="inventoryTableBody">
              <!-- Repeatable rows -->
            </tbody>
          </table>
          <nav aria-label="Page navigation" id="paginationNav">
            <% if (currentPage> 1) { %>
            <a
              href="?page=<%= currentPage - 1 %>&limit=<%= limit %>"
              aria-label="Previous Page"
              >Previous</a
            >
            <% } %> <% if (currentPage < totalPages) { %>
            <a
              href="?page=<%= currentPage + 1 %>&limit=<%= limit %>"
              aria-label="Next Page"
              >Next</a
            >
            <% } %>
          </nav>
        </div>

        <script src="../js/dashboard-api.js"></script>

        <script>
          // Function to update the time in real-time
          function updateTime() {
            const currentTimeElement = document.getElementById("current-time");
            const currentDateTime = new Date();
            currentTimeElement.textContent = currentDateTime.toLocaleString();
          }

          // Update the time every second (1000 milliseconds)
          setInterval(updateTime, 1000);

          // Get the maximize icon and table container
          const maximizeIcon = document.getElementById("maximize-icon");
          const tableContainer = document.querySelector(".table-container");

          maximizeIcon.addEventListener("click", function () {
            // Toggle the maximized class on the table container
            tableContainer.classList.toggle("maximized");

            // Ensure the main content remains scrollable
            if (tableContainer.classList.contains("maximized")) {
              // Disable scrolling in the main content when the table is maximized
              document.querySelector(".main-content").style.overflow = "hidden";
            } else {
              // Enable scrolling in the main content again
              document.querySelector(".main-content").style.overflow = "auto";
            }
          });
        </script>
      </div>
    </div>
  </body>
</html>
